(self["webpackChunkwebpack_mobile"] = self["webpackChunkwebpack_mobile"] || []).push([[2421],{

/***/ 559410:
/***/ ((module) => {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgBxdXRDYAgDARQ4iSOwghuKhsxygmRLyOl7dnYhA+N9yKUQAKQ2zjb2BNZ3RhW7g8Fd1UGH2gdVnm+cOFTg8GXWQ+uzlhw849oAu6lk4IA2ew3gEYFnEcnuBrd0h8VshQhzQvZbpqgGbcE1N96prjMgGgKIs5iEUfg1ZTx/WV6XGXCqgelNErUAAAAAElFTkSuQmCC";

/***/ }),

/***/ 884328:
/***/ ((module) => {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAbCAYAAACX6BTbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFYSURBVHgBtVbhWQMhDA1+HYARGMERboTboDdCN9ARdAK/TlA3uM8JdAPcADeIxCbXHB4tCL4fPQjwHiQkFCADRJzwjAH+iN2VsT1/LYs5GTDGfEILIlngnXvVFlB/5tO5Gl4itvgbPiNEtkMtuVcE9xvjE+9eQG1bKuCUwOuVeZOa914jQDt8unVjko2ctkgcNIAFJB6THpBAlR0pL3CQIIthXBkaodwz3MX+yPZn6IMjf/fAEUZsSHMNuraLJ9Q9bfK3IpcEDIZ+yRjrhYFOEE7y+ZcoQgdonoU8wkEfSKn4IPI37ozQBws5HWP4p3s+poby0rlNbDnTvTbKkxY61RibGk/inlsCcfxhVZwKFK3KVp9brDKQ8FJ8UhaY1eKZXWaTeY9qjseaHMFz6fS4RsDLO5qiLgE5MPJOhozQTxtawWJOfIyXd2DOrdlBITb+CEnZOObWfAP5AGjh4W+n7wAAAABJRU5ErkJggg==";

/***/ }),

/***/ 829358:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useIconColor: () => (/* binding */ useIconColor)
/* harmony export */ });
/* harmony import */ var _retool_builder_retool_development_mobile_node_modules_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(985707);
/* harmony import */ var _packages_common_utils_colorUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(238404);
const useIconColor=(textColor,disabled=false)=>{return (0,_retool_builder_retool_development_mobile_node_modules_react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{return disabled?(0,_packages_common_utils_colorUtils__WEBPACK_IMPORTED_MODULE_1__.withDisabledWash)(textColor):textColor;},[textColor,disabled]);};

/***/ }),

/***/ 687484:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _widgets_style_styleConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(202666);
const styleConfig=(0,_widgets_style_styleConfig__WEBPACK_IMPORTED_MODULE_0__["default"])('button',{background:{type:'defaultColor',defaultValue:'primary'},label:{type:'contrastText',context:'background'}});/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (styleConfig);

/***/ }),

/***/ 981178:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _retool_builder_retool_development_mobile_node_modules_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(985707);
const DisabledByContainerContext=(0,_retool_builder_retool_development_mobile_node_modules_react__WEBPACK_IMPORTED_MODULE_0__.createContext)(false);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DisabledByContainerContext);

/***/ }),

/***/ 228928:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  createFolder: () => (/* binding */ createFolder),
  deleteFile: () => (/* binding */ deleteFile),
  deleteFolder: () => (/* binding */ deleteFolder),
  getFile: () => (/* binding */ getFile),
  getFileMetadata: () => (/* binding */ getFileMetadata),
  getFiles: () => (/* binding */ getFiles),
  getFilesPaginated: () => (/* binding */ getFilesPaginated),
  getFolders: () => (/* binding */ getFolders),
  moveFileToFolder: () => (/* binding */ moveFileToFolder),
  moveFileToFolderName: () => (/* binding */ moveFileToFolderName),
  renameFolder: () => (/* binding */ renameFolder),
  updateFileMetadata: () => (/* binding */ updateFileMetadata),
  uploadFile: () => (/* binding */ uploadFile)
});

// EXTERNAL MODULE: ../frontend/src/common/pageUtils.ts
var pageUtils = __webpack_require__(289204);
// EXTERNAL MODULE: ../frontend/src/networking/index.ts + 1 modules
var networking = __webpack_require__(259316);
;// CONCATENATED MODULE: ../frontend/src/routes/RetoolStorage/publicAppUuidExtractor.ts
const PUBLIC_APP_URL_REGEX=/^\/embedded\/public\/[a-f0-9-]+(?:\?.*)?$/;const FORM_APP_URL_REGEX=/^\/form\/[a-f0-9-]+(?:\?.*)?$/;function getPublicAppUuid(pageUrl){const url=new URL(pageUrl);if(PUBLIC_APP_URL_REGEX.test(url.pathname)){return url.pathname.split('/').pop();}if(FORM_APP_URL_REGEX.test(url.pathname)){return url.pathname.split('/').pop();}return null;}
;// CONCATENATED MODULE: ../frontend/src/routes/RetoolStorage/api.ts
const BASE_URL='/api/files';async function getFiles({environmentId,name,limit}={}){const params={};if(environmentId)params.env=environmentId;if(name)params.name=name;if(limit)params.limit=String(limit);return (0,networking.callInternalApi)({url:`${BASE_URL}?${new URLSearchParams(params).toString()}`,method:'GET'});}async function getFilesPaginated(passedParams){const params={};Object.entries(passedParams).forEach(([key,value])=>{params[key]=String(value);});return (0,networking.callInternalApi)({url:`${BASE_URL}/list?${new URLSearchParams(params).toString()}`,method:'GET'});}async function getFileMetadata(fileId){return await (0,networking.callInternalApi)({url:`${BASE_URL}/${fileId}/metadata`,method:'GET'});}async function uploadFile(file,folderName,options){const formData=new FormData();const{fetchPolyfill,environmentId,shouldOverwriteOnNameCollision}=options;formData.append('file',file);const queryParams=[];if(folderName){queryParams.push(`folderName=${folderName}`);}if(environmentId){queryParams.push(`env=${environmentId}`);}if(shouldOverwriteOnNameCollision){queryParams.push(`shouldOverwriteOnNameCollision=true`);}if(options.isPublic){queryParams.push(`isPublic=true`);}let uploadUrl=`${BASE_URL}/upload${queryParams.length?`?${queryParams.join('&')}`:''}`;if((0,pageUtils.onEmbeddedPage)()){const pageUuid=getPublicAppUuid(window.location.href);if(pageUuid){uploadUrl=`/api/public/${pageUuid}/files/upload${queryParams.length?`?${queryParams.join('&')}`:''}`;}}const res=await (0,networking.callInternalApi)({url:uploadUrl,method:'POST',formDataBody:formData,fetchPolyfill});return res;}async function updateFileMetadata(fileId,metadata){return await (0,networking.callInternalApi)({url:`${BASE_URL}/${fileId}/metadata`,method:'POST',body:metadata});}async function deleteFile(fileId,environmentId){return await (0,networking.callInternalApi)({url:`${BASE_URL}/${fileId}${environmentId?`?env=${environmentId}`:''}`,method:'DELETE'});}async function getFile(fileId,pageUuid,environmentId){let url=`${BASE_URL}/${fileId}${environmentId?`?env=${environmentId}`:''}`;if((0,pageUtils.onEmbeddedPage)()&&pageUuid){url=`/api/public/${pageUuid}/files/${fileId}`;}return (0,networking.callInternalApi)({url,method:'GET',isFileStorageResponse:true});}async function getFolders(args){const{name,limit}=args!==null&&args!==void 0?args:{};const params={};if(name)params.name=name;if(limit)params.limit=String(limit);return (0,networking.callInternalApi)({url:`${BASE_URL}/folders?${new URLSearchParams(params).toString()}`,method:'GET'});}async function createFolder(folderName){return (0,networking.callInternalApi)({url:`${BASE_URL}/folders`,method:'POST',body:{folderName}});}async function deleteFolder(folderName){return (0,networking.callInternalApi)({url:`${BASE_URL}/folders/${encodeURIComponent(folderName)}`,method:'DELETE'});}async function moveFileToFolder(fileId,folderId){return (0,networking.callInternalApi)({url:`${BASE_URL}/folders/moveFile`,method:'POST',body:{fileId,folderId}});}async function moveFileToFolderName(fileId,folderName){return (0,networking.callInternalApi)({url:`${BASE_URL}/folders/moveFile`,method:'POST',body:{fileId,folderName}});}async function renameFolder(folderId,folderName){return (0,networking.callInternalApi)({url:`${BASE_URL}/folders/rename`,method:'POST',body:{folderId,folderName}});}

/***/ }),

/***/ 642421:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ CameraWidget)
});

// EXTERNAL MODULE: ../node_modules/.pnpm/@babel+runtime@7.24.8/node_modules/@babel/runtime/helpers/esm/defineProperty.js + 3 modules
var defineProperty = __webpack_require__(961639);
// EXTERNAL MODULE: ../node_modules/.pnpm/@babel+runtime@7.24.8/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js
var objectWithoutProperties = __webpack_require__(421565);
;// CONCATENATED MODULE: ../frontend/src/components/plugins/mobile/widgets/Camera/options.ts
const options={styles:{prefix:'button',props:{label:{defaultValue:'textAuto',contrast:'background'},background:{defaultValue:'primary'}}}};/* harmony default export */ const Camera_options = (options);
// EXTERNAL MODULE: ../packages/runtimeShared/plugins/registry.ts + 28 modules
var registry = __webpack_require__(730223);
// EXTERNAL MODULE: ../packages/runtimeShared/valueType/cast.ts + 1 modules
var cast = __webpack_require__(444367);
;// CONCATENATED MODULE: ../packages/runtimeShared/plugins/widgets/v2/api/validation/parseBytes.ts
const fileSizeRegex=/^(\d*\.?\d+)((?=[kmgt])|([kmgt])(?:i?b)?|b?)$/i;const matchFileSizeString=_size=>{let size=String(_size).replace(/\s+/g,'').toLowerCase();if(size.match(/[0-9]+$/)){size+='b';}return size.match(fileSizeRegex);};const isValidFileSize=size=>{const message='Must be a number with a valid file size unit, or a unitless number of bytes.';if(!String(size)){return null;}return matchFileSizeString(size)?null:message;};const parseBytes=size=>{var _unit$replace;const matches=matchFileSizeString(size);if(!matches){return null;}const[,amount,unit]=matches;const normalizedUnit=(_unit$replace=unit===null||unit===void 0?void 0:unit.replace(/i/g,''))!==null&&_unit$replace!==void 0?_unit$replace:'b';const binary=unit.includes('i');const i=['b','kb','mb','gb','tb'].indexOf(normalizedUnit);return Math.round(Number(amount)*Math.pow(binary?1024:1000,Math.max(i,0)));};/* harmony default export */ const validation_parseBytes = (parseBytes);
;// CONCATENATED MODULE: ../packages/runtimeShared/plugins/widgets/v2/api/validation/validateFiles.ts
const pluralFiles=count=>`${count} file${count===1?'':'s'}`;const formatFileSize=size=>{if(size==null)return null;const i=!size?size:Math.floor(Math.log(size)/Math.log(1000));return`${Math.round(size/Math.pow(1000,i)*100)/100} ${['B','kB','MB','GB','TB'][i]}`;};const validateFiles=(model,hideMessage=false)=>{const files=(0,cast.toFileArray)(model.files);const selectionType=model.selectionType;const minCount=(0,cast.toNumber)(model.minCount);const maxCount=(0,cast.toNumber)(model.maxCount);const minSize=validation_parseBytes((0,cast.toString)(model.minSize));const maxSize=validation_parseBytes((0,cast.toString)(model.maxSize));const formattedMin=formatFileSize(minSize);const formattedMax=formatFileSize(maxSize);if(selectionType!=='single'&&minCount&&minCount===maxCount&&files.length!==minCount){return hideMessage||`Please pick ${pluralFiles(minCount)}.`;}if(selectionType!=='single'&&minCount&&files.length<minCount){return hideMessage||`Please pick at least ${pluralFiles(minCount)}.`;}if(selectionType!=='single'&&maxCount&&files.length>maxCount){return hideMessage||`Please pick no more than ${pluralFiles(maxCount)}.`;}if(minSize&&maxSize&&files.some(file=>file.size<minSize||file.size>maxSize)){return hideMessage||`Must be between ${formattedMin} and ${formattedMax}.`;}if(minSize&&files.some(file=>file.size<minSize)){return hideMessage||`Must be at least ${formattedMin}.`;}if(maxSize&&files.some(file=>file.size>maxSize)){return hideMessage||`Must be no greater than ${formattedMax}.`;}};/* harmony default export */ const validation_validateFiles = (validateFiles);
;// CONCATENATED MODULE: ../packages/runtimeShared/plugins/widgets/v2/api/files/fileInputEvents.ts
const FILE_INPUT_EVENTS=['change','parse','uploadedToStorage'];
;// CONCATENATED MODULE: ../packages/runtimeShared/plugins/widgets/v2/api/files/getFileInputOptions.ts
const getFileInputOptions=formFieldType=>{const makeComputeValueFunc=(clearedValue,name)=>({model})=>{var _model$value;if(((_model$value=model.value)===null||_model$value===void 0?void 0:_model$value.length)===0){return clearedValue;}return model[name];};const propertyAnnotations={value:{updatesSync:['parsedValue','files']},parsedValue:{computeValueOverride:makeComputeValueFunc([],'parsedValue')},files:{computeValueOverride:makeComputeValueFunc([],'files'),hidden:({template})=>!!template.get('_isUpgraded')}};return{disableAutoAPI:['setValue'],events:FILE_INPUT_EVENTS,formFieldType:formFieldType!==null&&formFieldType!==void 0?formFieldType:'web',validation:{customFields:['selectionType','files','minCount','maxCount','minSize','maxSize'],customValidator: validation_validateFiles},propertyAnnotations:propertyAnnotations};};/* harmony default export */ const files_getFileInputOptions = (getFileInputOptions);
// EXTERNAL MODULE: ../packages/common/plugins/widgets/v2/api/values/commonTemplates.ts
var commonTemplates = __webpack_require__(974888);
;// CONCATENATED MODULE: ../packages/runtimeShared/plugins/widgets/v2/api/files/baseTemplate.ts
function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}/* harmony default export */ const baseTemplate = (_objectSpread(_objectSpread(_objectSpread({},commonTemplates.baseTemplate),commonTemplates.formFieldTemplate),{},{accept:'string[]',appendNewSelection:'boolean',disabled:'boolean',selectionType:['single','multiple','directory'],files:'file[]',loading:'boolean',maxCount:'number?',maxSize:'string',minCount:'number?',minSize:'string',parseFiles:'boolean',parsedValue:'array',parsing:'boolean',uploadToRetoolStorage:'boolean',shouldOverwriteOnNameCollision:'boolean',isPublic:'boolean',value:'base64[]',_isUpgraded:'boolean'}));
// EXTERNAL MODULE: ../frontend/src/components/plugins/mobile/commonStyles/layout.ts
var layout = __webpack_require__(421303);
;// CONCATENATED MODULE: ../frontend/src/components/plugins/mobile/widgets/Camera/template.ts
function template_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function template_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?template_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):template_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}/* harmony default export */ const template = (template_objectSpread(template_objectSpread({opened:'boolean',launchMode:['camera','library','option'],libraryOpened:'boolean',buttonText:'string',buttonSize:'string',quality:'number',iconAfter:'icon',iconBefore:'icon'},layout.widthTemplate),baseTemplate));
;// CONCATENATED MODULE: ../frontend/src/components/plugins/mobile/widgets/Camera/widgetRuntimeOptions.ts
function widgetRuntimeOptions_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function widgetRuntimeOptions_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?widgetRuntimeOptions_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):widgetRuntimeOptions_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}/* harmony default export */ const widgetRuntimeOptions = ((0,registry.registerMobile)(widgetRuntimeOptions_objectSpread(widgetRuntimeOptions_objectSpread({typeKey:'RNCameraWidget',name:'Camera',template: template},files_getFileInputOptions('mobile')),{},{events:['capture','open','close'],api:({updateModel})=>({open:{metadata:{label:'Open camera',description:'Open the camera overlay'},method:async()=>updateModel({opened:true})},close:{metadata:{label:'Close camera',description:'Close the camera overlay'},method:async()=>updateModel({opened:false})}}),validation:false})));
// EXTERNAL MODULE: ../packages/runtimeShared/utils/experiments.ts + 1 modules
var experiments = __webpack_require__(391932);
// EXTERNAL MODULE: ../frontend/src/routes/RetoolStorage/api.ts + 1 modules
var api = __webpack_require__(228928);
// EXTERNAL MODULE: ../frontend/src/store/appModel/jsApiUtils/fileUtils/parseCSV.ts
var parseCSV = __webpack_require__(523949);
// EXTERNAL MODULE: ../frontend/src/store/appModel/jsApiUtils/fileUtils/parseJSON.ts
var parseJSON = __webpack_require__(255507);
// EXTERNAL MODULE: ../frontend/src/store/appModel/jsApiUtils/fileUtils/parseXLSX.ts
var parseXLSX = __webpack_require__(289054);
;// CONCATENATED MODULE: ../frontend/src/components/plugins/widgets/v2/api/files/parseFile.ts
const parseFile=async(data,extension='')=>{const[contentType,base64]=data.split(',');if(contentType.match(/(?:text|application)\/(?:csv|x-csv|tab-separated-values)/g)||['csv','tsv'].includes(extension)){return parseCSV["default"].method(base64);}if(contentType.match(/application\/json/g)||extension==='json'){return parseJSON["default"].method(base64);}if(contentType.match(/application\/vnd.(?:openxmlformats-officedocument.spreadsheetml.sheet|ms-excel)/g)||['xlsx','xlsm','xlsb'].includes(extension)){return parseXLSX["default"].method(base64);}if(contentType.match(/(text\/|cert)/g)||['pem','crt','key'].includes(extension)){const{Base64}=await Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 946784));return Base64.decode(base64);}return null;};/* harmony default export */ const files_parseFile = (parseFile);
;// CONCATENATED MODULE: ../frontend/src/components/plugins/widgets/v2/api/files/readFile.ts
const readFile=async file=>new Promise((resolve,reject)=>{const reader=new FileReader();reader.readAsDataURL(file);reader.onload=()=>resolve(String(reader.result));reader.onerror=error=>reject(error);});/* harmony default export */ const files_readFile = (readFile);
;// CONCATENATED MODULE: ../frontend/src/components/plugins/widgets/v2/api/files/getFileWidgetValues.ts
const getFormattedFiles=fileList=>{return fileList.map(({name,size,type,lastModified})=>({name,size,lastModified,type}));};const getBase64Values=async({fileList,maxSizeBytes,maxTotalSizeBytes})=>{let totalSizeSoFar=0;const filePromises=fileList.map(async file=>{try{totalSizeSoFar+=file.size;if(maxSizeBytes&&file.size>maxSizeBytes||maxTotalSizeBytes&&totalSizeSoFar>maxTotalSizeBytes){return new Promise(resolve=>resolve(''));}return await files_readFile(file);}catch(error){console.log(error);return'';}});return Promise.all(filePromises);};const getParsedValues=async(value,fileList)=>{return Promise.all(value.map(async(data,i)=>{try{var _fileList$i;const extension=(_fileList$i=fileList[i])===null||_fileList$i===void 0?void 0:_fileList$i.name.split('.')[1];return await files_parseFile(data,extension);}catch(error){console.log(error);return null;}}));};
;// CONCATENATED MODULE: ../frontend/src/components/plugins/widgets/v2/api/files/handleFileChange.ts
function handleFileChange_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function handleFileChange_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?handleFileChange_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):handleFileChange_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}const handleFileChange=async(fileList,{updateModel,parseFiles,onChange,onParse,onUploadedToStorage,uploadToRetoolStorage,shouldOverwriteOnNameCollision,isPublic,_isUpgraded=false,sendToast,maxSize,maxCount})=>{const files=getFormattedFiles(fileList);const maxSizeBytes=validation_parseBytes((0,cast.toString)(maxSize));const maxTotalSizeBytes=maxSizeBytes&&maxCount?Math.floor(maxSizeBytes*maxCount):null;const value=await getBase64Values({fileList,maxSizeBytes,maxTotalSizeBytes});const shouldHandleBase64EncodingError=value.some(val=>!val);if(shouldHandleBase64EncodingError){sendToast({props:{title:'Some files could not be encoded',type:'error'}});}const valueWithoutContentPrefixes=value.map(value=>value.split(',')[1]);const retoolStorageResponseMap={};onChange();if(uploadToRetoolStorage&&(0,experiments.getExperimentValue)('retoolStorageWidgetUpload')){updateModel({loading:true});const uploadPromises=fileList.map(async file=>{const uploadedFile=await (0,api.uploadFile)(file,'',{shouldOverwriteOnNameCollision,isPublic});retoolStorageResponseMap[file.name]={fileId:uploadedFile.id,url:uploadedFile.url};return uploadedFile;});uploadPromises.forEach(promise=>{promise.then(result=>{sendToast({props:{title:`${result.name} uploaded successfully.`,type:'success'}});return;}).catch(err=>{sendToast({props:{title:'Failed to upload file',description:err.payload.message,type:'error'}});return;});});await Promise.allSettled(uploadPromises);if(fileList.length>0){onUploadedToStorage();}updateModel({loading:false});}const valueWithFileSchema=valueWithoutContentPrefixes.map((value,index)=>{const retoolStorageContext=retoolStorageResponseMap[files[index].name];const retoolFileObject={name:files[index].name,type:files[index].type,base64Data:value,sizeBytes:files[index].size};return handleFileChange_objectSpread(handleFileChange_objectSpread({},retoolFileObject),retoolStorageContext?retoolStorageContext:{});});const valueUpdate=_isUpgraded?valueWithFileSchema:valueWithoutContentPrefixes;if(parseFiles){updateModel({parsing:true});const parsedValue=await getParsedValues(value,files);updateModel({value:valueUpdate,files,parsing:false,parsedValue});}else{updateModel({value:valueUpdate,files,parsing:false,parsedValue:[]});}onParse();};/* harmony default export */ const files_handleFileChange = (handleFileChange);
// EXTERNAL MODULE: ./src/components/plugins/widgets/connectMobileWidget.tsx + 9 modules
var connectMobileWidget = __webpack_require__(360062);
// EXTERNAL MODULE: ../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js
var react = __webpack_require__(985707);
// EXTERNAL MODULE: ../node_modules/.pnpm/expo-image-picker@15.0.7_expo@51.0.21_@babel+preset-env@7.24.8_@babel+core@7.24.9__encoding@0_ilmmbqc2kfk5m2s6wc76m2gdii/node_modules/expo-image-picker/build/ImagePicker.js + 1 modules
var ImagePicker = __webpack_require__(586828);
// EXTERNAL MODULE: ../node_modules/.pnpm/expo-image-picker@15.0.7_expo@51.0.21_@babel+preset-env@7.24.8_@babel+core@7.24.9__encoding@0_ilmmbqc2kfk5m2s6wc76m2gdii/node_modules/expo-image-picker/build/ImagePicker.types.js
var ImagePicker_types = __webpack_require__(191046);
// EXTERNAL MODULE: ../frontend/src/components/plugins/mobile/utils/useIconColor.ts
var useIconColor = __webpack_require__(829358);
// EXTERNAL MODULE: ../frontend/src/components/plugins/mobile/widgets/Camera/styleConfig.ts
var styleConfig = __webpack_require__(687484);
// EXTERNAL MODULE: ../frontend/src/components/plugins/widgets/style/hooks/useStyles.ts + 34 modules
var useStyles = __webpack_require__(973990);
// EXTERNAL MODULE: ./src/localization/index.ts + 5 modules
var localization = __webpack_require__(373355);
// EXTERNAL MODULE: ./src/toolbox/Icon/Icon.tsx + 3683 modules
var Icon = __webpack_require__(312220);
// EXTERNAL MODULE: ./src/utilities/showActionsheet.ts
var showActionsheet = __webpack_require__(953252);
// EXTERNAL MODULE: ./src/utilities/theme.ts
var utilities_theme = __webpack_require__(690059);
// EXTERNAL MODULE: ./src/components/design-system/Button.tsx
var Button = __webpack_require__(778475);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/Animated/index.js + 39 modules
var Animated = __webpack_require__(939077);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/Image/index.js + 2 modules
var Image = __webpack_require__(356216);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/Pressable/index.js + 4 modules
var Pressable = __webpack_require__(770665);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/StatusBar/index.js
var StatusBar = __webpack_require__(799182);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/StyleSheet/index.js + 5 modules
var StyleSheet = __webpack_require__(460648);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/View/index.js
var View = __webpack_require__(130486);
// EXTERNAL MODULE: ../node_modules/.pnpm/expo-camera@15.0.16_patch_hash=tjwfk4i7ezovpjnzyo44fuwmoe_expo@51.0.21_@babel+preset-env@7.24_6wqnxlmxsmp5wis5mhz2dvvlhq/node_modules/expo-camera/build/legacy/Camera.types.js
var Camera_types = __webpack_require__(743985);
// EXTERNAL MODULE: ../node_modules/.pnpm/expo-camera@15.0.16_patch_hash=tjwfk4i7ezovpjnzyo44fuwmoe_expo@51.0.21_@babel+preset-env@7.24_6wqnxlmxsmp5wis5mhz2dvvlhq/node_modules/expo-camera/build/legacy/Camera.js + 9 modules
var Camera = __webpack_require__(91725);
// EXTERNAL MODULE: ../frontend/src/common/platform.ts + 1 modules
var platform = __webpack_require__(555522);
// EXTERNAL MODULE: ../frontend/src/common/utils/toasts.ts + 3 modules
var toasts = __webpack_require__(179154);
// EXTERNAL MODULE: ./src/toolbox/Modal/index.tsx + 4 modules
var Modal = __webpack_require__(772966);
// EXTERNAL MODULE: ./src/utilities/colors.ts
var colors = __webpack_require__(240664);
// EXTERNAL MODULE: ./src/utilities/useIsScreenPortrait.ts
var useIsScreenPortrait = __webpack_require__(424194);
// EXTERNAL MODULE: ./src/components/plugins/widgets/common/CameraPermissionScreen.tsx
var CameraPermissionScreen = __webpack_require__(281887);
;// CONCATENATED MODULE: ./src/components/plugins/widgets/Camera/CameraModalDisplayStylesV2.ts
const previewButtonBoxHeight=216;const styles=StyleSheet["default"].create({topButtonBox:{paddingHorizontal:24,flexDirection:'row',justifyContent:'space-between',alignContent:'center'},topButtonBoxLandscape:{marginStart:16,marginVertical:4},bottomContainer:{flex:1,backgroundColor:'transparent',justifyContent:'flex-end',marginBottom:'9%',marginTop:'50%'},portraitPreviewContainer:{flex:1,alignContent:'center',justifyContent:'center',marginBottom:previewButtonBoxHeight},landscapePreviewContainer:{flex:1,alignContent:'center',justifyContent:'center',marginEnd:previewButtonBoxHeight},sideContainer:{flex:1,marginEnd:'10%',backgroundColor:'transparent',justifyContent:'flex-end',marginLeft:'40%'},sideContainerIosAdjustment:{marginEnd:'4%'},portraitCarouselStyle:{paddingBottom:18},landscapeCarouselStyle:{paddingEnd:18,height:'100%'},portraitButtonBox:{backgroundColor:'transparent',flexDirection:'row',alignItems:'center',justifyContent:'center',marginHorizontal:24},portraitButtonBoxPreview:{justifyContent:'space-between'},landscapeButtonBox:{backgroundColor:'transparent',flexDirection:'column-reverse',alignItems:'center',justifyContent:'space-between',paddingVertical:4},startButtonPortrait:{width:'33%',alignItems:'flex-start'},startButtonLandscape:{},centerButtonPortrait:{width:'33%',alignItems:'center'},centerButtonLandscape:{},endButtonPortrait:{width:'33%',alignItems:'flex-end'},endButtonLandscape:{},outerCircle:{borderWidth:2,borderRadius:72,borderColor:'white',height:72,width:72,display:'flex',justifyContent:'center',alignItems:'center'},innerCircle:{borderWidth:2,borderRadius:58,borderColor:'white',height:58,width:58,backgroundColor:'white'},disabledCircle:{opacity:0.75},textButton:{color:'white',fontSize:17,lineHeight:22},topPadding:{marginTop:'10%'},paddingBottom:{paddingBottom:18},alignCenter:{alignItems:'center'},buttonDownState:{opacity:0.75}});
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/ImageBackground/index.js
var ImageBackground = __webpack_require__(121664);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/Text/index.js
var Text = __webpack_require__(219740);
// EXTERNAL MODULE: ../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(453175);
;// CONCATENATED MODULE: ./src/components/plugins/widgets/Camera/CameraPreviewV2.tsx
const CameraPreviewV2=({aspectRatio,photo,savePhoto,retakePhoto})=>{const isScreenPortrait=(0,useIsScreenPortrait["default"])();const shouldAddTopPaddingWeb=platform.PLATFORM==='web'&&isScreenPortrait;const shouldAddTopPaddingMobile=isScreenPortrait;const adjustedColumnDirectionStyle=(0,react.useMemo)(()=>{if(isScreenPortrait){return{flexDirection:'column'};}else{return{flexDirection:'row'};}},[isScreenPortrait]);const adjustedHeightStyle=(0,react.useMemo)(()=>{if(isScreenPortrait){return{width:'100%'};}else{return{height:'100%'};}},[isScreenPortrait]);return (0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StatusBar["default"],{backgroundColor:colors.nearBlack}),(0,jsx_runtime.jsxs)(View["default"],{style:[StyleSheet["default"].absoluteFill,{backgroundColor:colors.nearBlack}],children:[isScreenPortrait&&platform.PLATFORM==='ios'&&(0,jsx_runtime.jsx)(View["default"],{style:{height:48}}),(0,jsx_runtime.jsxs)(View["default"],{style:[adjustedColumnDirectionStyle,isScreenPortrait?styles.portraitPreviewContainer:styles.landscapePreviewContainer],children:[(0,jsx_runtime.jsx)(View["default"],{style:(styles.topButtonBox,{height:26})}),shouldAddTopPaddingMobile&&(0,jsx_runtime.jsx)(View["default"],{style:{height:16}}),(0,jsx_runtime.jsx)(ImageBackground["default"],{source:{uri:photo===null||photo===void 0?void 0:photo.uri},style:[{aspectRatio,backgroundColor:colors.nearBlack},adjustedHeightStyle,shouldAddTopPaddingWeb&&styles.topPadding]})]})]}),(0,jsx_runtime.jsxs)(View["default"],{style:[isScreenPortrait?styles.bottomContainer:styles.sideContainer,adjustedColumnDirectionStyle,platform.PLATFORM==='ios'?styles.sideContainerIosAdjustment:null],children:[(0,jsx_runtime.jsx)(View["default"],{style:styles.paddingBottom}),(0,jsx_runtime.jsxs)(View["default"],{style:isScreenPortrait?[styles.portraitButtonBox,styles.portraitButtonBoxPreview]:styles.landscapeButtonBox,children:[(0,jsx_runtime.jsx)(Pressable["default"],{onPress:retakePhoto,style:({pressed})=>[pressed&&styles.buttonDownState,styles.alignCenter],hitSlop:30,children:(0,jsx_runtime.jsx)(Text["default"],{style:styles.textButton,children:(0,localization.localizedString)('Retake')})}),(0,jsx_runtime.jsx)(View["default"],{style:{height:styles.outerCircle.height,width:styles.outerCircle.width}}),(0,jsx_runtime.jsx)(Pressable["default"],{onPress:savePhoto,style:({pressed})=>[pressed&&styles.buttonDownState,styles.alignCenter],hitSlop:30,children:(0,jsx_runtime.jsx)(Text["default"],{style:styles.textButton,children:(0,localization.localizedString)('Use Photo')})})]})]})]});};/* harmony default export */ const Camera_CameraPreviewV2 = (CameraPreviewV2);
;// CONCATENATED MODULE: ./src/components/plugins/widgets/Camera/CameraModal.tsx
const attachIconName='line/mail-send-email-attachment-image-1';let hasPermissionOnce=false;const CameraCore=({quality,onCapture,onClose})=>{const cameraRef=(0,react.useRef)(null);const[hasPermission,setHasPermission]=(0,react.useState)(hasPermissionOnce||null);const[cameraType,setCameraType]=(0,react.useState)(Camera_types.CameraType.back);const[capturing,setCapturing]=(0,react.useState)(false);const[ratio]=(0,react.useState)('4:3');const[photo,setPhoto]=(0,react.useState)(null);const isScreenPortrait=(0,useIsScreenPortrait["default"])();const pickImageFromLibrary=async()=>{const result=await ImagePicker.launchImageLibraryAsync({mediaTypes:ImagePicker_types.MediaTypeOptions.Images,allowsEditing:false,aspect:[4,3],quality:0.25});const savePhoto=async()=>{const[{uri}]=result.assets;const response=await fetch(uri);const blob=await response.blob();await(onCapture===null||onCapture===void 0?void 0:onCapture([blob]));onClose===null||onClose===void 0?void 0:onClose();};if(!result.canceled){savePhoto();}};(0,react.useEffect)(()=>{;(async()=>{if(!hasPermissionOnce){const{status}=await Camera["default"].requestCameraPermissionsAsync();const granted=status==='granted';if(granted){hasPermissionOnce=true;}setHasPermission(granted);}})();},[]);(0,react.useEffect)(()=>{if(photo){if(capturing===true&&cameraRef.current){cameraRef.current.pausePreview();}}else if(capturing===false&&cameraRef.current){cameraRef.current.resumePreview();}},[photo,capturing]);const switchCamera=()=>{setCameraType(prevCameraType=>prevCameraType===Camera_types.CameraType.back?Camera_types.CameraType.front:Camera_types.CameraType.back);};const backgroundColorAnim=(0,react.useRef)(new Animated["default"].Value(0)).current;const animStyle=(0,react.useMemo)(()=>{return{position:'absolute',left:0,right:0,top:0,bottom:0,backgroundColor:'rgba(255, 255, 255, .5)',opacity:backgroundColorAnim};},[backgroundColorAnim]);const animateCapture=(0,react.useCallback)(()=>{Animated["default"].timing(backgroundColorAnim,{toValue:1,duration:25,useNativeDriver:true}).start(()=>{Animated["default"].timing(backgroundColorAnim,{toValue:0,duration:500,useNativeDriver:true}).start();});},[backgroundColorAnim]);const savePhoto=(0,react.useCallback)(async()=>{if(!photo){return;}const{uri}=photo;const response=await fetch(uri);const blob=await response.blob();await(onCapture===null||onCapture===void 0?void 0:onCapture([blob]));onClose===null||onClose===void 0?void 0:onClose();},[photo,onCapture,onClose]);const handlePhoto=(0,react.useCallback)(async()=>{if(cameraRef.current){animateCapture();setCapturing(true);const options={quality,base64:true,ratio};const newPhoto=await cameraRef.current.takePictureAsync(options);setCapturing(false);setPhoto(newPhoto);}},[cameraRef,animateCapture,quality,ratio]);const retakePhoto=()=>{setPhoto(null);};const stringToRatio=ratioString=>{const spl=ratioString.split(':');return[Number(spl[0]),Number(spl[1])];};const cameraRatio=stringToRatio(ratio);const aspectRatio=isScreenPortrait?cameraRatio[1]/cameraRatio[0]:cameraRatio[0]/cameraRatio[1];const shouldAddTopPaddingWeb=platform.PLATFORM==='web'&&isScreenPortrait;const shouldAddTopPaddingMobile=isScreenPortrait;const adjustedColumnDirectionStyle=(0,react.useMemo)(()=>{if(isScreenPortrait){return{flexDirection:'column'};}else{return{flexDirection:'row'};}},[isScreenPortrait]);const adjustedRowDirectionStyle=(0,react.useMemo)(()=>{if(isScreenPortrait){return{flexDirection:'row'};}else{return{flexDirection:'column'};}},[isScreenPortrait]);const adjustedHeightStyle=(0,react.useMemo)(()=>{if(isScreenPortrait){return{width:'100%'};}else{return{height:'100%'};}},[isScreenPortrait]);if(!hasPermission){const _onClose=()=>{onClose===null||onClose===void 0?void 0:onClose();};return (0,jsx_runtime.jsx)(CameraPermissionScreen["default"],{hasPermission:hasPermission,onClose:_onClose});}return photo?(0,jsx_runtime.jsx)(Camera_CameraPreviewV2,{aspectRatio:platform.PLATFORM==='web'?aspectRatio:photo.width/photo.height,photo:photo,savePhoto:savePhoto,retakePhoto:retakePhoto}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StatusBar["default"],{backgroundColor:colors.nearBlack}),(0,jsx_runtime.jsxs)(View["default"],{style:[StyleSheet["default"].absoluteFill,{backgroundColor:colors.nearBlack}],children:[isScreenPortrait&&platform.PLATFORM==='ios'?(0,jsx_runtime.jsx)(View["default"],{style:{height:48}}):null,(0,jsx_runtime.jsxs)(View["default"],{style:[adjustedColumnDirectionStyle,shouldAddTopPaddingWeb&&styles.topPadding,{backgroundColor:colors.nearBlack}],children:[(0,jsx_runtime.jsxs)(View["default"],{style:[styles.topButtonBox,adjustedRowDirectionStyle,isScreenPortrait?null:styles.topButtonBoxLandscape],children:[(0,jsx_runtime.jsx)(Pressable["default"],{onPress:onClose,style:({pressed})=>[pressed&&styles.buttonDownState],hitSlop:30,children:(0,jsx_runtime.jsx)(Image["default"],{source:__webpack_require__(559410),style:[{tintColor:'white',width:20,height:20}],accessibilityLabel:"Close"})}),(0,jsx_runtime.jsx)(Pressable["default"],{onPress:switchCamera,style:({pressed})=>[styles.alignCenter,pressed&&styles.buttonDownState],hitSlop:30,accessibilityLabel:"Switch",children:(0,jsx_runtime.jsx)(Image["default"],{source:__webpack_require__(884328),style:{width:20,height:20}})})]}),shouldAddTopPaddingMobile&&(0,jsx_runtime.jsx)(View["default"],{style:{height:16}}),(0,jsx_runtime.jsx)(Camera["default"],{autoFocus:true,style:[adjustedHeightStyle,{aspectRatio}],ref:cameraRef,type:cameraType,ratio:ratio,children:(0,jsx_runtime.jsx)(Animated["default"].View,{style:animStyle})})]})]}),(0,jsx_runtime.jsxs)(View["default"],{style:[isScreenPortrait?styles.bottomContainer:styles.sideContainer,adjustedColumnDirectionStyle,platform.PLATFORM==='ios'?styles.sideContainerIosAdjustment:null],children:[(0,jsx_runtime.jsx)(View["default"],{style:isScreenPortrait?styles.portraitCarouselStyle:styles.landscapeCarouselStyle}),(0,jsx_runtime.jsxs)(View["default"],{style:isScreenPortrait?styles.portraitButtonBox:styles.landscapeButtonBox,children:[(0,jsx_runtime.jsx)(Pressable["default"],{onPress:pickImageFromLibrary,style:({pressed})=>[isScreenPortrait?styles.startButtonPortrait:styles.startButtonLandscape,pressed&&styles.buttonDownState,capturing&&{opacity:0.5}],hitSlop:20,disabled:capturing,accessibilityLabel:"Library",children:(0,jsx_runtime.jsx)(Icon.Icon,{name:attachIconName,color:"white",size:24})}),(0,jsx_runtime.jsx)(Pressable["default"],{onPress:handlePhoto,style:({pressed})=>[isScreenPortrait?styles.centerButtonPortrait:styles.centerButtonLandscape,pressed&&styles.buttonDownState,capturing&&{opacity:0.5}],disabled:capturing,accessibilityLabel:"Capture",children:(0,jsx_runtime.jsx)(View["default"],{style:[styles.outerCircle,capturing?styles.disabledCircle:null],children:(0,jsx_runtime.jsx)(View["default"],{style:[styles.innerCircle,capturing?styles.disabledCircle:null]})})}),(0,jsx_runtime.jsx)(View["default"],{style:[isScreenPortrait?styles.endButtonPortrait:styles.endButtonLandscape]})]})]})]});};const CameraModal=props=>{const{quality,parseFiles,onCapture:_onCapture,onClose,onParse,updateModel}=props;const sendToast=(0,toasts.useSendToast)();const onCapture=async fileList=>{await files_handleFileChange(fileList,{onChange:()=>{},onParse:onParse!==null&&onParse!==void 0?onParse:()=>{},onUploadedToStorage:()=>{},parseFiles,updateModel,uploadToRetoolStorage:false,shouldOverwriteOnNameCollision:false,isPublic:false,sendToast,maxCount:null,maxSize:null});_onCapture===null||_onCapture===void 0?void 0:_onCapture();};const handleClose=(0,react.useCallback)(()=>{updateModel({opened:false});onClose===null||onClose===void 0?void 0:onClose();},[onClose,updateModel]);return (0,jsx_runtime.jsx)(Modal.Modal,{visible:true,onRequestClose:handleClose,children:(0,jsx_runtime.jsx)(CameraCore,{quality:quality,onCapture:onCapture,onClose:handleClose})});};/* harmony default export */ const Camera_CameraModal = (CameraModal);
;// CONCATENATED MODULE: ./src/components/plugins/widgets/Camera/Camera.tsx
const Camera_Camera=({style,buttonText,buttonSize,disabled,quality,onOpen,onCapture,onCaptureWithHandleFileChange,updateModel,parseFiles,onClose,opened,launchMode,libraryOpened,setCameraOpen,setLibraryOpen,hidden,iconAfter,iconBefore,fetching=false})=>{var _theme$borderRadius;const theme=(0,react.useContext)(utilities_theme["default"]);const runtimeStyles=(0,react.useMemo)(()=>{var _style$toObject;return(_style$toObject=style===null||style===void 0?void 0:style.toObject())!==null&&_style$toObject!==void 0?_style$toObject:{};},[style]);const{hydratedProps}=(0,useStyles["default"])({config:styleConfig["default"],styles:{label:runtimeStyles.label,background:runtimeStyles.background}});const{backgroundColor,textColor}=(()=>{const{label,background}=hydratedProps!==null&&hydratedProps!==void 0?hydratedProps:{};return{backgroundColor:background,textColor:label};})();const iconColor=(0,useIconColor.useIconColor)(textColor,disabled);const borderRadius=(_theme$borderRadius=theme.borderRadius)!==null&&_theme$borderRadius!==void 0?_theme$borderRadius:6;const openModal=()=>{const launchCamera=()=>{setCameraOpen(true);onOpen===null||onOpen===void 0?void 0:onOpen();};const launchLibrary=()=>{setLibraryOpen(true);onOpen===null||onOpen===void 0?void 0:onOpen();};switch(launchMode){case'camera':launchCamera();break;case'library':launchLibrary();break;case'option':(0,showActionsheet.showActionSheet)({title:'',options:[{label:(0,localization.localizedString)('Camera'),value:'camera'},{label:(0,localization.localizedString)('Photo library'),value:'library'}],onChange:index=>{if(index==='camera'){launchCamera();}else{launchLibrary();}}});break;default:launchCamera();}};const pickImageFromLibrary=(0,react.useCallback)(async()=>{const result=await ImagePicker.launchImageLibraryAsync({mediaTypes:ImagePicker_types.MediaTypeOptions.Images,allowsEditing:false,aspect:[4,3],quality:0.25});const savePhoto=async()=>{const[{uri}]=result.assets;const response=await fetch(uri);const blob=await response.blob();await(onCaptureWithHandleFileChange===null||onCaptureWithHandleFileChange===void 0?void 0:onCaptureWithHandleFileChange([blob]));onClose===null||onClose===void 0?void 0:onClose();};if(!result.canceled){savePhoto();}},[onCaptureWithHandleFileChange,onClose]);(0,react.useEffect)(()=>{if(libraryOpened){pickImageFromLibrary();setLibraryOpen(false);}},[libraryOpened,pickImageFromLibrary,setLibraryOpen]);return (0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!hidden&&(0,jsx_runtime.jsx)(Button["default"],{disabled:disabled,leftElement:iconBefore?(0,jsx_runtime.jsx)(Icon.Icon,{name:iconBefore,color:iconColor}):null,rightElement:iconAfter?(0,jsx_runtime.jsx)(Icon.Icon,{name:iconAfter,color:iconColor}):null,textColor:textColor,backgroundColor:backgroundColor,size:buttonSize,onPress:openModal,title:buttonText,loading:fetching,borderRadius:borderRadius}),opened?(0,jsx_runtime.jsx)(Camera_CameraModal,{quality:quality,parseFiles:parseFiles,onCapture:onCapture,onClose:()=>{onClose===null||onClose===void 0?void 0:onClose();setCameraOpen(false);},updateModel:updateModel}):null]});};/* harmony default export */ const widgets_Camera_Camera = (Camera_Camera);
;// CONCATENATED MODULE: ./src/components/plugins/widgets/Camera/CameraWidget.tsx
const _excluded=["updateModel","onCapture","onParse","parseFiles"];function CameraWidget_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function CameraWidget_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?CameraWidget_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CameraWidget_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}/* harmony default export */ const CameraWidget = ((0,connectMobileWidget["default"])(widgetRuntimeOptions.typeKey,widgets_Camera_Camera,widgetRuntimeOptions,Camera_options,_ref=>{let{updateModel,onCapture,onParse=()=>{},parseFiles}=_ref,rest=(0,objectWithoutProperties["default"])(_ref,_excluded);return CameraWidget_objectSpread(CameraWidget_objectSpread({},rest),{},{updateModel,onCapture,onCaptureWithHandleFileChange:async fileList=>{await files_handleFileChange(fileList,{onChange:()=>{},onParse,parseFiles,updateModel,maxCount:null,maxSize:null});onCapture===null||onCapture===void 0?void 0:onCapture();},setCameraOpen(opened){updateModel({opened});},setLibraryOpen(libraryOpened){updateModel({libraryOpened});}});}));

/***/ }),

/***/ 360062:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ connectWidget)
});

// EXTERNAL MODULE: ../node_modules/.pnpm/@babel+runtime@7.24.8/node_modules/@babel/runtime/helpers/esm/defineProperty.js + 3 modules
var defineProperty = __webpack_require__(961639);
// EXTERNAL MODULE: ../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js
var react = __webpack_require__(985707);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-redux@7.2.4_react-dom@18.3.1_react@18.3.1__react-native@0.74.3_@babel+core@7.24.9_@babe_az4c6i5siqhukmd7qezh6vzqeq/node_modules/react-redux/es/index.js + 19 modules
var es = __webpack_require__(66612);
// EXTERNAL MODULE: ../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js
var lodash = __webpack_require__(410642);
var lodash_default = /*#__PURE__*/__webpack_require__.n(lodash);
// EXTERNAL MODULE: ../packages/common/immutable.ts
var immutable = __webpack_require__(789572);
// EXTERNAL MODULE: ../frontend/src/components/plugins/index.ts + 1 modules
var plugins = __webpack_require__(720908);
;// CONCATENATED MODULE: ../frontend/src/components/plugins/mobile/utils/getWidgetStyleConfig.ts
function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}const isConfigWithVariants=config=>!!config&&'variants'in config;const getWidgetStyleConfig=({styles,validation,label})=>{var _styles$prefix,_styles$providesStyle;if(!styles)return;const base={label:!!label,validation:!!validation,prefix:(_styles$prefix=styles===null||styles===void 0?void 0:styles.prefix)!==null&&_styles$prefix!==void 0?_styles$prefix:'',providesStyleContext:(_styles$providesStyle=styles===null||styles===void 0?void 0:styles.providesStyleContext)!==null&&_styles$providesStyle!==void 0?_styles$providesStyle:false};if(!isConfigWithVariants(styles)){const{props={}}=styles!==null&&styles!==void 0?styles:{};return _objectSpread(_objectSpread({},base),{},{variants:{default:props}});}const{variants}=styles;return _objectSpread(_objectSpread({},base),{},{variants});};/* harmony default export */ const utils_getWidgetStyleConfig = (getWidgetStyleConfig);
// EXTERNAL MODULE: ../frontend/src/components/plugins/widgets/common/events/useEventCallbacks.tsx + 2 modules
var useEventCallbacks = __webpack_require__(746968);
// EXTERNAL MODULE: ../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(453175);
;// CONCATENATED MODULE: ../frontend/src/components/BaseErrorBoundary.native-web.tsx
const BaseErrorBoundary=({boundaryName:_boundaryName,children})=>{return (0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:children});};
;// CONCATENATED MODULE: ../frontend/src/components/plugins/widgets/common/WidgetErrorBoundaryCompat.tsx
const InnerWidgetErrorBoundaryError=({errorMessage,onClickReload,shouldShowReloadButton})=>(0,jsx_runtime.jsxs)("div",{"data-testid":"Widgets::ErrorBoundary_div",children:[(0,jsx_runtime.jsxs)("code",{children:[" Error: ",errorMessage,"... "]}),shouldShowReloadButton&&(0,jsx_runtime.jsx)("button",{type:"button",onClick:onClickReload,children:"reload"})]});
;// CONCATENATED MODULE: ../frontend/src/components/plugins/widgets/common/WidgetErrorBoundary.tsx
function WidgetErrorBoundary_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function WidgetErrorBoundary_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?WidgetErrorBoundary_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):WidgetErrorBoundary_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}const useErrorBoundaryClientRateLimit=({maxClickCount=3})=>{const[reloadClickCount,setReloadClickCount]=(0,react.useState)(0);const handleClickReload=(0,react.useCallback)(resetError=>{setReloadClickCount(prev=>prev+1);resetError();},[setReloadClickCount]);const shouldAllowReload=reloadClickCount<maxClickCount;return{handleClickReload,shouldAllowReload};};const WidgetErrorBoundary=props=>{const{id:widgetId,largeScreen,editMode,fetching,namespace,position,widgetType,children}=props;const{handleClickReload,shouldAllowReload}=useErrorBoundaryClientRateLimit({});return (0,jsx_runtime.jsx)(BaseErrorBoundary,{boundaryName:widgetType!==null&&widgetType!==void 0?widgetType:'unknown',team:"@tryretool/building-ui-experience",fallback:({error,resetError})=>(0,jsx_runtime.jsx)(InnerWidgetErrorBoundaryError,{errorMessage:error.message.substring(0,160),onClickReload:()=>handleClickReload(resetError),shouldShowReloadButton:shouldAllowReload}),onBeforeCapture:(scope,_error,componentStack)=>{scope.setExtras({info:componentStack,editMode,fetching,largeScreen,namespace:namespace===null||namespace===void 0?void 0:namespace.getNamespace(),position:position===null||position===void 0?void 0:position.toJSON(),widgetId});scope.setLevel('fatal');scope.setTags({widget:widgetType});},children:children});};const withWidgetErrorBoundary=(widgetType,Widget)=>{const WithWidgetErrorBoundary=props=>(0,jsx_runtime.jsx)(WidgetErrorBoundary,WidgetErrorBoundary_objectSpread(WidgetErrorBoundary_objectSpread({},props),{},{widgetType:widgetType,children:(0,jsx_runtime.jsx)(Widget,WidgetErrorBoundary_objectSpread({},props))}));WithWidgetErrorBoundary.displayName=`WithWidgetErrorBoundary(${Widget.displayName||Widget.name||widgetType})`;return WithWidgetErrorBoundary;};
// EXTERNAL MODULE: ../frontend/src/components/plugins/widgets/v2/api/disable/DisabledByContainerContext.ts
var DisabledByContainerContext = __webpack_require__(981178);
;// CONCATENATED MODULE: ../frontend/src/components/plugins/widgets/v2/api/disable/useDisabledByContainer.ts
function useDisabledByContainer(){return (0,react.useContext)(DisabledByContainerContext["default"]);}
// EXTERNAL MODULE: ../frontend/src/components/plugins/widgets/v2/api/jsApi/widgetApiRef.ts
var widgetApiRef = __webpack_require__(664075);
// EXTERNAL MODULE: ../node_modules/.pnpm/immutable@4.0.0-rc.12/node_modules/immutable/dist/immutable.es.js
var immutable_es = __webpack_require__(883006);
// EXTERNAL MODULE: ../packages/runtimeShared/plugins/widgets/v2/api/values/defaultValues.ts
var defaultValues = __webpack_require__(670757);
;// CONCATENATED MODULE: ../frontend/src/components/design-system/Label/constants.ts
const LABEL_WIDTH_UNITS=['%','px','col'];const DEFAULT_LABEL_WIDTH='33';const DEFAULT_INLINE_LABEL_WIDTH='100';const DEFAULT_LABEL_WIDTH_UNIT='%';
// EXTERNAL MODULE: ../frontend/src/components/plugins/widgets/common/layoutConstants.ts
var layoutConstants = __webpack_require__(849967);
;// CONCATENATED MODULE: ../frontend/src/components/plugins/widgets/v2/api/values/defaultValues.ts
function defaultValues_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function defaultValues_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?defaultValues_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):defaultValues_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}const defaultValueByPropertyDesktop={label:'Label',labelWidth:DEFAULT_LABEL_WIDTH,labelWidthUnit:DEFAULT_LABEL_WIDTH_UNIT,showBorder:true,showHeaderBorder:true,showFooterBorder:true,margin:layoutConstants.DEFAULT_MARGIN};const defaultValueByPropertyMobile=defaultValues_objectSpread(defaultValues_objectSpread({},defaultValueByPropertyDesktop),{},{showBorder:false});function getDefaultValues(config,{hasEvents=false,isMobile=false}){const defaultValueByProperty=isMobile?defaultValueByPropertyMobile:defaultValueByPropertyDesktop;return Object.entries(config).reduce((defaults,[key,type])=>{var _defaultValueByProper;defaults[key]=(_defaultValueByProper=defaultValueByProperty[key])!==null&&_defaultValueByProper!==void 0?_defaultValueByProper:(0,defaultValues.getDefaultValue)(type);return defaults;},defaultValues_objectSpread({},hasEvents?{events:immutable_es["default"].OrderedMap()}:{}));}
// EXTERNAL MODULE: ../frontend/src/components/plugins/widgets/v2/api/values/useModelValues.ts
var useModelValues = __webpack_require__(241387);
// EXTERNAL MODULE: ../frontend/src/components/plugins/widgets/v2/api/values/useUpdateModel.ts + 1 modules
var useUpdateModel = __webpack_require__(684313);
// EXTERNAL MODULE: ../frontend/src/hostRuntime/index.ts + 8 modules
var hostRuntime = __webpack_require__(997375);
;// CONCATENATED MODULE: ../frontend/src/store/appModel/triggerPluginApi.ts
function triggerPluginApi({namespacedId,instance,method,paramsObject}){return()=>{return (0,hostRuntime.callHostRuntime)({method:'triggerApiCall',apiMethod:method,namespacedId,instance,paramsObject});};}
// EXTERNAL MODULE: ./src/store/mobileEditorSelector.ts
var mobileEditorSelector = __webpack_require__(762729);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/StyleSheet/index.js + 5 modules
var StyleSheet = __webpack_require__(460648);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/Text/index.js
var Text = __webpack_require__(219740);
// EXTERNAL MODULE: ../node_modules/.pnpm/react-native-web@0.19.10_encoding@0.1.13_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-native-web/dist/exports/View/index.js
var View = __webpack_require__(130486);
// EXTERNAL MODULE: ./src/toolbox/Box/index.tsx + 3 modules
var Box = __webpack_require__(6814);
// EXTERNAL MODULE: ./src/toolbox/Icon/Icon.tsx + 3683 modules
var Icon = __webpack_require__(312220);
// EXTERNAL MODULE: ./src/toolbox/Shimmer/index.tsx
var Shimmer = __webpack_require__(509039);
// EXTERNAL MODULE: ./src/utilities/colors.ts
var colors = __webpack_require__(240664);
;// CONCATENATED MODULE: ./src/components/design-system/FormFeedback.tsx
function FormFeedback_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function FormFeedback_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FormFeedback_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FormFeedback_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}const styles=StyleSheet["default"].create({container:{minHeight:25.5,paddingTop:3,flexDirection:'row',alignItems:'center'},icon:{marginRight:3,height:14,width:14},feedback:{fontWeight:'500',fontSize:13,lineHeight:22}});const FormFeedback=({message,type='valid',loading=false})=>{const{iconName,color}=type==='valid'?{iconName:undefined,color:colors.grey}:type==='disabled'?{iconName:undefined,color:colors.disabledInputText}:{iconName:'bold/interface-alert-warning-circle-alternate',color:colors.errorRed};return loading?(0,jsx_runtime.jsx)(Box.Box,{display:"flex",mb:8,children:(0,jsx_runtime.jsx)(Shimmer.Shimmer,{height:22})}):(0,jsx_runtime.jsx)(View["default"],{style:styles.container,children:message?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!!iconName&&(0,jsx_runtime.jsx)(View["default"],{style:styles.icon,children:(0,jsx_runtime.jsx)(Icon.Icon,{name:iconName,color:color,size:14})}),(0,jsx_runtime.jsx)(Text["default"],{style:FormFeedback_objectSpread(FormFeedback_objectSpread({},styles.feedback),{},{color}),children:message})]}):null});};/* harmony default export */ const design_system_FormFeedback = (FormFeedback);
// EXTERNAL MODULE: ./src/components/LayoutWrapper.tsx + 3 modules
var LayoutWrapper = __webpack_require__(11412);
;// CONCATENATED MODULE: ./src/components/plugins/widgets/connectMobileWidget.tsx
function connectMobileWidget_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function connectMobileWidget_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?connectMobileWidget_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):connectMobileWidget_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}const WidgetWrapper=({id,hidden,type,children,modelObj,style,onClick})=>{const isEditorDisplayMode=(0,es.useSelector)(mobileEditorSelector.isEditorDisplayModeSelector);const{padding,width,cornerType,widthGrowFactor,elevation,showBorder}=modelObj;const disableHidden=type.includes('RNCamera')||type.includes('RNScanner');const isHidden=hidden&&!disableHidden;return (0,jsx_runtime.jsx)(LayoutWrapper["default"],{cornerType:cornerType,elevation:elevation,padding:padding,width:width,widthGrowFactor:widthGrowFactor,showBorder:showBorder,type:type,isHidden:isHidden,isEditorDisplayMode:isEditorDisplayMode,pluginId:id,style:style,onClick:onClick,children:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:children})});};function connectWidget(type,Component,runtimeOptions,options,mapProps){var _runtimeOptions$event;const{events=[],template}=runtimeOptions;const plugin=plugins.PluginRepository[type];if(!plugin){throw new Error(`Widget '${type}' must be registered before it is connected.`);}const styles=utils_getWidgetStyleConfig({styles:options.styles,validation:runtimeOptions.validation,label:options.label});const defaults=getDefaultValues(template,{hasEvents:!!((_runtimeOptions$event=runtimeOptions.events)!==null&&_runtimeOptions$event!==void 0&&_runtimeOptions$event.length),isMobile:true});plugin.template=values=>(0,immutable.makeTypedMap)(defaults).merge(values);plugin.options=connectMobileWidget_objectSpread(connectMobileWidget_objectSpread(connectMobileWidget_objectSpread(connectMobileWidget_objectSpread({},plugin.options),options),runtimeOptions),{},{styles});const RetoolWidget=({id,instance,rgProps,namespace,fetching})=>{var _modelObj$hidden;const instanceCompat=instance==null?[]:[instance];const modelObj=(0,useModelValues["default"])({config:template,id,instance:instanceCompat});const updateModel=(0,useUpdateModel["default"])(id,instanceCompat);const disabledByContainer=useDisabledByContainer();const dispatch=(0,es.useDispatch)();const apiRef=(0,widgetApiRef.useWidgetApiRef)(id,instanceCompat);const callbacks=(0,useEventCallbacks["default"])(id,instanceCompat,events);const hidden=(_modelObj$hidden=modelObj.hidden)!==null&&_modelObj$hidden!==void 0?_modelObj$hidden:false;const style=modelObj.style;const errorMessage=runtimeOptions.validation&&!modelObj.hideValidationMessage?modelObj.validationMessage:undefined;const labelCaption=modelObj.labelCaption;const disabled=disabledByContainer||modelObj.disabled;const formFeedbackComponent=(0,react.useMemo)(()=>{if(errorMessage){return (0,jsx_runtime.jsx)(design_system_FormFeedback,{message:errorMessage,type:"invalid"});}else if(labelCaption){return (0,jsx_runtime.jsx)(design_system_FormFeedback,{message:labelCaption,type:disabled?'disabled':'valid'});}else{return null;}},[disabled,errorMessage,labelCaption]);const renderWrapper=(0,react.useCallback)(children=>{const onClick=(()=>{if(type==='RNContainerWidget'){var _modelObj$events$size,_modelObj$events;const numClickEvents=(_modelObj$events$size=(_modelObj$events=modelObj.events)===null||_modelObj$events===void 0?void 0:_modelObj$events.size)!==null&&_modelObj$events$size!==void 0?_modelObj$events$size:0;if(numClickEvents>0){return()=>{var _callbacks$onClick;(_callbacks$onClick=callbacks.onClick)===null||_callbacks$onClick===void 0?void 0:_callbacks$onClick.call(callbacks);};}}})();return (0,jsx_runtime.jsxs)(WidgetWrapper,{id:id,hidden:hidden,type:type,modelObj:modelObj,style:style,onClick:onClick,children:[children,formFeedbackComponent]},id);},[id,hidden,modelObj,style,formFeedbackComponent,callbacks]);const props=mapProps(connectMobileWidget_objectSpread(connectMobileWidget_objectSpread(connectMobileWidget_objectSpread({},modelObj),callbacks),{},{style,apiRef,id,updateModel,triggerApiCall:({method,paramsObject})=>{return dispatch(triggerPluginApi({namespacedId:id,instance:instanceCompat,method,paramsObject}));},instance,rgProps,fetching,renderWrapper,namespace,disabled}));const shouldRenderWrapper=!(type.includes('RNFab')||type.includes('RNIcon'));if(shouldRenderWrapper){return renderWrapper((0,jsx_runtime.jsx)(Component,connectMobileWidget_objectSpread({},props)));}else{return (0,jsx_runtime.jsx)(Component,connectMobileWidget_objectSpread(connectMobileWidget_objectSpread({},props),{},{renderWrapper:renderWrapper}));}};RetoolWidget.displayName=`${type}(${Component.displayName||Component.name||'Component'})`;return (0,react.memo)(withWidgetErrorBoundary(type,RetoolWidget),(lodash_default()).isEqual);}

/***/ }),

/***/ 586828:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  CameraType: () => (/* reexport */ ImagePicker_types.CameraType),
  MediaTypeOptions: () => (/* reexport */ ImagePicker_types.MediaTypeOptions),
  PermissionStatus: () => (/* reexport */ PermissionsInterface.PermissionStatus),
  UIImagePickerControllerQualityType: () => (/* reexport */ ImagePicker_types.UIImagePickerControllerQualityType),
  UIImagePickerPreferredAssetRepresentationMode: () => (/* reexport */ ImagePicker_types.UIImagePickerPreferredAssetRepresentationMode),
  UIImagePickerPresentationStyle: () => (/* reexport */ ImagePicker_types.UIImagePickerPresentationStyle),
  VideoExportPreset: () => (/* reexport */ ImagePicker_types.VideoExportPreset),
  getCameraPermissionsAsync: () => (/* binding */ getCameraPermissionsAsync),
  getMediaLibraryPermissionsAsync: () => (/* binding */ getMediaLibraryPermissionsAsync),
  getPendingResultAsync: () => (/* binding */ getPendingResultAsync),
  launchCameraAsync: () => (/* binding */ launchCameraAsync),
  launchImageLibraryAsync: () => (/* binding */ launchImageLibraryAsync),
  requestCameraPermissionsAsync: () => (/* binding */ requestCameraPermissionsAsync),
  requestMediaLibraryPermissionsAsync: () => (/* binding */ requestMediaLibraryPermissionsAsync),
  useCameraPermissions: () => (/* binding */ useCameraPermissions),
  useMediaLibraryPermissions: () => (/* binding */ useMediaLibraryPermissions)
});

// EXTERNAL MODULE: ../node_modules/.pnpm/expo-modules-core@1.12.19_react-native@0.74.3_@babel+core@7.24.9_@babel+preset-env@7.24.8_@ba_wlv3coyyw7r2lykekkjmjlf5mi/node_modules/expo-modules-core/build/errors/CodedError.js
var CodedError = __webpack_require__(836261);
// EXTERNAL MODULE: ../node_modules/.pnpm/expo-modules-core@1.12.19_react-native@0.74.3_@babel+core@7.24.9_@babel+preset-env@7.24.8_@ba_wlv3coyyw7r2lykekkjmjlf5mi/node_modules/expo-modules-core/build/PermissionsHook.js
var PermissionsHook = __webpack_require__(634901);
// EXTERNAL MODULE: ../node_modules/.pnpm/expo-modules-core@1.12.19_react-native@0.74.3_@babel+core@7.24.9_@babel+preset-env@7.24.8_@ba_wlv3coyyw7r2lykekkjmjlf5mi/node_modules/expo-modules-core/build/errors/UnavailabilityError.js
var UnavailabilityError = __webpack_require__(200222);
// EXTERNAL MODULE: ../node_modules/.pnpm/expo-modules-core@1.12.19_react-native@0.74.3_@babel+core@7.24.9_@babel+preset-env@7.24.8_@ba_wlv3coyyw7r2lykekkjmjlf5mi/node_modules/expo-modules-core/build/PermissionsInterface.js
var PermissionsInterface = __webpack_require__(765179);
// EXTERNAL MODULE: ../node_modules/.pnpm/@babel+runtime@7.24.8/node_modules/@babel/runtime/helpers/esm/defineProperty.js + 3 modules
var defineProperty = __webpack_require__(961639);
// EXTERNAL MODULE: ../node_modules/.pnpm/expo-modules-core@1.12.19_react-native@0.74.3_@babel+core@7.24.9_@babel+preset-env@7.24.8_@ba_wlv3coyyw7r2lykekkjmjlf5mi/node_modules/expo-modules-core/build/Platform.js + 1 modules
var Platform = __webpack_require__(11157);
// EXTERNAL MODULE: ../node_modules/.pnpm/expo-image-picker@15.0.7_expo@51.0.21_@babel+preset-env@7.24.8_@babel+core@7.24.9__encoding@0_ilmmbqc2kfk5m2s6wc76m2gdii/node_modules/expo-image-picker/build/ImagePicker.types.js
var ImagePicker_types = __webpack_require__(191046);
;// CONCATENATED MODULE: ../node_modules/.pnpm/expo-image-picker@15.0.7_expo@51.0.21_@babel+preset-env@7.24.8_@babel+core@7.24.9__encoding@0_ilmmbqc2kfk5m2s6wc76m2gdii/node_modules/expo-image-picker/build/ExponentImagePicker.web.js
function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty["default"])(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}const MediaTypeInput={[ImagePicker_types.MediaTypeOptions.All]:'video/mp4,video/quicktime,video/x-m4v,video/*,image/*',[ImagePicker_types.MediaTypeOptions.Images]:'image/*',[ImagePicker_types.MediaTypeOptions.Videos]:'video/mp4,video/quicktime,video/x-m4v,video/*'};/* harmony default export */ const ExponentImagePicker_web = ({async launchImageLibraryAsync({mediaTypes=ImagePicker_types.MediaTypeOptions.Images,allowsMultipleSelection=false,base64=false}){if(!Platform["default"].isDOMAvailable){return{canceled:true,assets:null};}return await openFileBrowserAsync({mediaTypes,allowsMultipleSelection,base64});},async launchCameraAsync({mediaTypes=ImagePicker_types.MediaTypeOptions.Images,allowsMultipleSelection=false,base64=false}){if(!Platform["default"].isDOMAvailable){return{canceled:true,assets:null};}return await openFileBrowserAsync({mediaTypes,allowsMultipleSelection,capture:true,base64});},async getCameraPermissionsAsync(){return permissionGrantedResponse();},async requestCameraPermissionsAsync(){return permissionGrantedResponse();},async getMediaLibraryPermissionsAsync(_writeOnly){return permissionGrantedResponse();},async requestMediaLibraryPermissionsAsync(_writeOnly){return permissionGrantedResponse();}});function permissionGrantedResponse(){return{status:PermissionsInterface.PermissionStatus.GRANTED,expires:'never',granted:true,canAskAgain:true};}function openFileBrowserAsync({mediaTypes,capture=false,allowsMultipleSelection=false,base64}){const mediaTypeFormat=MediaTypeInput[mediaTypes];const input=document.createElement('input');input.style.display='none';input.setAttribute('type','file');input.setAttribute('accept',mediaTypeFormat);input.setAttribute('id',String(Math.random()));if(allowsMultipleSelection){input.setAttribute('multiple','multiple');}if(capture){input.setAttribute('capture','camera');}document.body.appendChild(input);return new Promise(resolve=>{input.addEventListener('change',async()=>{if(input.files){const files=allowsMultipleSelection?input.files:[input.files[0]];const assets=await Promise.all(Array.from(files).map(file=>readFile(file,{base64})));resolve({canceled:false,assets});}else{resolve({canceled:true,assets:null});}document.body.removeChild(input);});const event=new MouseEvent('click');input.dispatchEvent(event);});}function readFile(targetFile,options){return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onerror=()=>{reject(new Error(`Failed to read the selected media because the operation failed.`));};reader.onload=({target})=>{const uri=target.result;const returnRaw=()=>resolve({uri,width:0,height:0});if(typeof uri==='string'){const image=new Image();image.src=uri;image.onload=()=>{var _image$naturalWidth,_image$naturalHeight;resolve(_objectSpread({uri,width:(_image$naturalWidth=image.naturalWidth)!==null&&_image$naturalWidth!==void 0?_image$naturalWidth:image.width,height:(_image$naturalHeight=image.naturalHeight)!==null&&_image$naturalHeight!==void 0?_image$naturalHeight:image.height,mimeType:targetFile.type,fileName:targetFile.name},options.base64&&{base64:uri.substr(uri.indexOf(',')+1)}));};image.onerror=()=>returnRaw();}else{returnRaw();}};reader.readAsDataURL(targetFile);});}
;// CONCATENATED MODULE: ../node_modules/.pnpm/expo-image-picker@15.0.7_expo@51.0.21_@babel+preset-env@7.24.8_@babel+core@7.24.9__encoding@0_ilmmbqc2kfk5m2s6wc76m2gdii/node_modules/expo-image-picker/build/ImagePicker.js
function validateOptions(options){const{aspect,quality,videoMaxDuration}=options;if(aspect!=null){const[x,y]=aspect;if(x<=0||y<=0){throw new CodedError.CodedError('ERR_INVALID_ARGUMENT',`Invalid aspect ratio values ${x}:${y}. Provide positive numbers.`);}}if(quality&&(quality<0||quality>1)){throw new CodedError.CodedError('ERR_INVALID_ARGUMENT',`Invalid 'quality' value ${quality}. Provide a value between 0 and 1.`);}if(videoMaxDuration&&videoMaxDuration<0){throw new CodedError.CodedError('ERR_INVALID_ARGUMENT',`Invalid 'videoMaxDuration' value ${videoMaxDuration}. Provide a non-negative number.`);}return options;}async function getCameraPermissionsAsync(){return ExponentImagePicker_web.getCameraPermissionsAsync();}async function getMediaLibraryPermissionsAsync(writeOnly=false){return ExponentImagePicker_web.getMediaLibraryPermissionsAsync(writeOnly);}async function requestCameraPermissionsAsync(){return ExponentImagePicker_web.requestCameraPermissionsAsync();}async function requestMediaLibraryPermissionsAsync(writeOnly=false){const imagePickerMethod=ExponentImagePicker_web.requestMediaLibraryPermissionsAsync;return imagePickerMethod(writeOnly);}const useMediaLibraryPermissions=(0,PermissionsHook.createPermissionHook)({getMethod:options=>getMediaLibraryPermissionsAsync(options===null||options===void 0?void 0:options.writeOnly),requestMethod:options=>requestMediaLibraryPermissionsAsync(options===null||options===void 0?void 0:options.writeOnly)});const useCameraPermissions=(0,PermissionsHook.createPermissionHook)({getMethod:getCameraPermissionsAsync,requestMethod:requestCameraPermissionsAsync});async function getPendingResultAsync(){if(ExponentImagePicker_web.getPendingResultAsync){return ExponentImagePicker_web.getPendingResultAsync();}return[];}async function launchCameraAsync(options={}){if(!ExponentImagePicker_web.launchCameraAsync){throw new UnavailabilityError.UnavailabilityError('ImagePicker','launchCameraAsync');}return await ExponentImagePicker_web.launchCameraAsync(validateOptions(options));}async function launchImageLibraryAsync(options){if(!ExponentImagePicker_web.launchImageLibraryAsync){throw new UnavailabilityError.UnavailabilityError('ImagePicker','launchImageLibraryAsync');}if(options!==null&&options!==void 0&&options.allowsEditing&&options.allowsMultipleSelection){console.warn('[expo-image-picker] `allowsEditing` is not supported when `allowsMultipleSelection` is enabled and will be ignored.'+"Disable either 'allowsEditing' or 'allowsMultipleSelection' in 'launchImageLibraryAsync' "+'to fix this warning.');}return await ExponentImagePicker_web.launchImageLibraryAsync(options!==null&&options!==void 0?options:{});}

/***/ }),

/***/ 191046:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CameraType: () => (/* binding */ CameraType),
/* harmony export */   MediaTypeOptions: () => (/* binding */ MediaTypeOptions),
/* harmony export */   UIImagePickerControllerQualityType: () => (/* binding */ UIImagePickerControllerQualityType),
/* harmony export */   UIImagePickerPreferredAssetRepresentationMode: () => (/* binding */ UIImagePickerPreferredAssetRepresentationMode),
/* harmony export */   UIImagePickerPresentationStyle: () => (/* binding */ UIImagePickerPresentationStyle),
/* harmony export */   VideoExportPreset: () => (/* binding */ VideoExportPreset)
/* harmony export */ });
var MediaTypeOptions;(function(MediaTypeOptions){MediaTypeOptions["All"]="All";MediaTypeOptions["Videos"]="Videos";MediaTypeOptions["Images"]="Images";})(MediaTypeOptions||(MediaTypeOptions={}));var VideoExportPreset;(function(VideoExportPreset){VideoExportPreset[VideoExportPreset["Passthrough"]=0]="Passthrough";VideoExportPreset[VideoExportPreset["LowQuality"]=1]="LowQuality";VideoExportPreset[VideoExportPreset["MediumQuality"]=2]="MediumQuality";VideoExportPreset[VideoExportPreset["HighestQuality"]=3]="HighestQuality";VideoExportPreset[VideoExportPreset["H264_640x480"]=4]="H264_640x480";VideoExportPreset[VideoExportPreset["H264_960x540"]=5]="H264_960x540";VideoExportPreset[VideoExportPreset["H264_1280x720"]=6]="H264_1280x720";VideoExportPreset[VideoExportPreset["H264_1920x1080"]=7]="H264_1920x1080";VideoExportPreset[VideoExportPreset["H264_3840x2160"]=8]="H264_3840x2160";VideoExportPreset[VideoExportPreset["HEVC_1920x1080"]=9]="HEVC_1920x1080";VideoExportPreset[VideoExportPreset["HEVC_3840x2160"]=10]="HEVC_3840x2160";})(VideoExportPreset||(VideoExportPreset={}));var UIImagePickerControllerQualityType;(function(UIImagePickerControllerQualityType){UIImagePickerControllerQualityType[UIImagePickerControllerQualityType["High"]=0]="High";UIImagePickerControllerQualityType[UIImagePickerControllerQualityType["Medium"]=1]="Medium";UIImagePickerControllerQualityType[UIImagePickerControllerQualityType["Low"]=2]="Low";UIImagePickerControllerQualityType[UIImagePickerControllerQualityType["VGA640x480"]=3]="VGA640x480";UIImagePickerControllerQualityType[UIImagePickerControllerQualityType["IFrame1280x720"]=4]="IFrame1280x720";UIImagePickerControllerQualityType[UIImagePickerControllerQualityType["IFrame960x540"]=5]="IFrame960x540";})(UIImagePickerControllerQualityType||(UIImagePickerControllerQualityType={}));var UIImagePickerPresentationStyle;(function(UIImagePickerPresentationStyle){UIImagePickerPresentationStyle["FULL_SCREEN"]="fullScreen";UIImagePickerPresentationStyle["PAGE_SHEET"]="pageSheet";UIImagePickerPresentationStyle["FORM_SHEET"]="formSheet";UIImagePickerPresentationStyle["CURRENT_CONTEXT"]="currentContext";UIImagePickerPresentationStyle["OVER_FULL_SCREEN"]="overFullScreen";UIImagePickerPresentationStyle["OVER_CURRENT_CONTEXT"]="overCurrentContext";UIImagePickerPresentationStyle["POPOVER"]="popover";UIImagePickerPresentationStyle["AUTOMATIC"]="automatic";})(UIImagePickerPresentationStyle||(UIImagePickerPresentationStyle={}));var UIImagePickerPreferredAssetRepresentationMode;(function(UIImagePickerPreferredAssetRepresentationMode){UIImagePickerPreferredAssetRepresentationMode["Automatic"]="automatic";UIImagePickerPreferredAssetRepresentationMode["Compatible"]="compatible";UIImagePickerPreferredAssetRepresentationMode["Current"]="current";})(UIImagePickerPreferredAssetRepresentationMode||(UIImagePickerPreferredAssetRepresentationMode={}));var CameraType;(function(CameraType){CameraType["back"]="back";CameraType["front"]="front";})(CameraType||(CameraType={}));

/***/ })

}])
//# sourceMappingURL=2421.da4f4d19.chunk.js.map